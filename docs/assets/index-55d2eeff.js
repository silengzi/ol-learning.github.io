import{l as Ce,i as ee,F as Se,M as ve,L as Ee,a as Re,b as Pe,t as Me}from"./MultiPolygon-1c2bad20.js";import{c as Ge,a as Ve,g as Ie,b as be,d as De,e as ke,f as J,h as te,i as Le,t as Oe,j as fe,P as Ae,k as je,l as Be,m as Ne,C as We,T as C,n as D,o as V,p as ge,q as U,r as Ue,s as O,u as ze,v as Ze,w as He,x as Ke,y as Xe,z as pe,A as Ye,B as Y,D as ie,E as $e,F as Qe,G as Z,H as xe,I as Je,J as qe,U as et,K as tt,L as it,N as rt,O as st,Q as ot,R as re,S as Te,W as nt,X as at,Y as lt,M as dt,V as ct}from"./TileLayer-f9f86bd4.js";import{C as se,g as ht,E as oe,H as $,c as ut,h as ft,r as ne,B as gt,l as pt,T as xt,I as Tt,S as yt,F as mt,a as wt}from"./featureloader-3de5b58a.js";import{_ as _t,i as Ft,o as Ct,c as St,b as G,t as N,g as W,F as vt,p as Et,k as Rt}from"./index-4acf93cb.js";const Pt="Advanced Mapbox Vector Tiles",Mt=`
  <div id="map" class="map"></div>

  <script src="https://openlayers.org/en/v8.1.0/examples/resources/mapbox-streets-v6-style.js"><\/script>
`,Gt=`
  .map {
    width: 100%;
    height: 400px;
  }
  .map {
    background: #f8f4f0;
  }
`,Vt=`
  import MVT from 'ol/format/MVT.js';
  import Map from 'ol/Map.js';
  import TileGrid from 'ol/tilegrid/TileGrid.js';
  import VectorTileLayer from 'ol/layer/VectorTile.js';
  import VectorTileSource from 'ol/source/VectorTile.js';
  import View from 'ol/View.js';
  import {Fill, Icon, Stroke, Style, Text} from 'ol/style.js';
  import {get as getProjection} from 'ol/proj.js';

  const key =
    'Your Mapbox access token from https://mapbox.com/ here';

  // Calculation of resolutions that match zoom levels 1, 3, 5, 7, 9, 11, 13, 15.
  const resolutions = [];
  for (let i = 0; i <= 8; ++i) {
    resolutions.push(156543.03392804097 / Math.pow(2, i * 2));
  }
  // Calculation of tile urls for zoom levels 1, 3, 5, 7, 9, 11, 13, 15.
  function tileUrlFunction(tileCoord) {
    return (
      'https://{a-d}.tiles.mapbox.com/v4/mapbox.mapbox-streets-v6/' +
      '{z}/{x}/{y}.vector.pbf?access_token=' +
      key
    )
      .replace('{z}', String(tileCoord[0] * 2 - 1))
      .replace('{x}', String(tileCoord[1]))
      .replace('{y}', String(tileCoord[2]))
      .replace(
        '{a-d}',
        'abcd'.substr(((tileCoord[1] << tileCoord[0]) + tileCoord[2]) % 4, 1)
      );
  }

  const map = new Map({
    layers: [
      new VectorTileLayer({
        source: new VectorTileSource({
          attributions:
            '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> ' +
            '© <a href="https://www.openstreetmap.org/copyright">' +
            'OpenStreetMap contributors</a>',
          format: new MVT(),
          tileGrid: new TileGrid({
            extent: getProjection('EPSG:3857').getExtent(),
            resolutions: resolutions,
            tileSize: 512,
          }),
          tileUrlFunction: tileUrlFunction,
        }),
        style: createMapboxStreetsV6Style(Style, Fill, Stroke, Icon, Text),
      }),
    ],
    target: 'map',
    view: new View({
      center: [0, 0],
      minZoom: 1,
      zoom: 2,
    }),
  });
`,It=`
  {
    "name": "mapbox-vector-tiles-advanced",
    "dependencies": {
      "ol": "8.1.0"
    },
    "devDependencies": {
      "vite": "^3.2.3"
    },
    "scripts": {
      "start": "vite",
      "build": "vite build"
    }
  }
`;function bt(t,e,i,s,o){var n=new e({color:""}),r=new i({color:"",width:1}),h=new t({fill:n}),c=new t({fill:n,stroke:r}),l=new t({stroke:r}),a=new t({text:new o({text:"",fill:n,stroke:r})}),x={};function y(f){var T=x[f];return T||(T=new t({image:new s({src:"https://cdn.jsdelivr.net/npm/@mapbox/maki@4.0.0/icons/"+f+"-15.svg",imgSize:[15,15],crossOrigin:"anonymous"})}),x[f]=T),T}var d=[];return function(f,T){var g=0,u=f.get("layer"),p=f.get("class"),m=f.get("type"),w=f.get("scalerank"),E=f.get("labelrank"),R=f.get("admin_level"),v=f.get("maritime"),S=f.get("disputed"),F=f.get("maki"),M=f.getGeometry().getType();return u=="landuse"&&p=="park"?(n.setColor("#d8e8c8"),d[g++]=h):u=="landuse"&&p=="cemetery"?(n.setColor("#e0e4dd"),d[g++]=h):u=="landuse"&&p=="hospital"?(n.setColor("#fde"),d[g++]=h):u=="landuse"&&p=="school"?(n.setColor("#f0e8f8"),d[g++]=h):u=="landuse"&&p=="wood"?(n.setColor("rgb(233,238,223)"),d[g++]=h):u=="waterway"&&p!="river"&&p!="stream"&&p!="canal"||u=="waterway"&&p=="river"?(r.setColor("#a0c8f0"),r.setWidth(1),d[g++]=l):u!="waterway"||p!="stream"&&p!="canal"?u=="water"?(n.setColor("#a0c8f0"),d[g++]=h):u=="aeroway"&&M=="Polygon"?(n.setColor("rgb(242,239,235)"),d[g++]=h):u=="aeroway"&&M=="LineString"&&T<=76.43702828517625?(r.setColor("#f0ede9"),r.setWidth(1),d[g++]=l):u=="building"?(n.setColor("#f2eae2"),r.setColor("#dfdbd7"),r.setWidth(1),d[g++]=c):u=="tunnel"&&p=="motorway_link"?(r.setColor("#e9ac77"),r.setWidth(1),d[g++]=l):u=="tunnel"&&p=="service"?(r.setColor("#cfcdca"),r.setWidth(1),d[g++]=l):u!="tunnel"||p!="street"&&p!="street_limited"?u=="tunnel"&&p=="main"&&T<=1222.99245256282||u=="tunnel"&&p=="motorway"?(r.setColor("#e9ac77"),r.setWidth(1),d[g++]=l):u=="tunnel"&&p=="path"?(r.setColor("#cba"),r.setWidth(1),d[g++]=l):u=="tunnel"&&p=="major_rail"?(r.setColor("#bbb"),r.setWidth(2),d[g++]=l):u=="road"&&p=="motorway_link"?(r.setColor("#e9ac77"),r.setWidth(1),d[g++]=l):u!="road"||p!="street"&&p!="street_limited"||M!="LineString"?u=="road"&&p=="main"&&T<=1222.99245256282||u=="road"&&p=="motorway"&&T<=4891.96981025128?(r.setColor("#e9ac77"),r.setWidth(1),d[g++]=l):u=="road"&&p=="path"?(r.setColor("#cba"),r.setWidth(1),d[g++]=l):u=="road"&&p=="major_rail"?(r.setColor("#bbb"),r.setWidth(2),d[g++]=l):u=="bridge"&&p=="motorway_link"||u=="bridge"&&p=="motorway"?(r.setColor("#e9ac77"),r.setWidth(1),d[g++]=l):u=="bridge"&&p=="service"?(r.setColor("#cfcdca"),r.setWidth(1),d[g++]=l):u!="bridge"||p!="street"&&p!="street_limited"?u=="bridge"&&p=="main"&&T<=1222.99245256282?(r.setColor("#e9ac77"),r.setWidth(1),d[g++]=l):u=="bridge"&&p=="path"?(r.setColor("#cba"),r.setWidth(1),d[g++]=l):u=="bridge"&&p=="major_rail"?(r.setColor("#bbb"),r.setWidth(2),d[g++]=l):u=="admin"&&R>=3&&v===0||u=="admin"&&R==2&&S===0&&v===0||u=="admin"&&R==2&&S===1&&v===0?(r.setColor("#9e9cab"),r.setWidth(1),d[g++]=l):u=="admin"&&R>=3&&v===1||u=="admin"&&R==2&&v===1?(r.setColor("#a0c8f0"),r.setWidth(1),d[g++]=l):u=="country_label"&&w===1?(a.getText().setText(f.get("name_en")),a.getText().setFont('bold 11px "Open Sans", "Arial Unicode MS"'),n.setColor("#334"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(2),d[g++]=a):u=="country_label"&&w===2&&T<=19567.87924100512?(a.getText().setText(f.get("name_en")),a.getText().setFont('bold 10px "Open Sans", "Arial Unicode MS"'),n.setColor("#334"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(2),d[g++]=a):u=="country_label"&&w===3&&T<=9783.93962050256?(a.getText().setText(f.get("name_en")),a.getText().setFont('bold 9px "Open Sans", "Arial Unicode MS"'),n.setColor("#334"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(2),d[g++]=a):u=="country_label"&&w===4&&T<=4891.96981025128?(a.getText().setText(f.get("name_en")),a.getText().setFont('bold 8px "Open Sans", "Arial Unicode MS"'),n.setColor("#334"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(2),d[g++]=a):u=="marine_label"&&E===1&&M=="Point"||u=="marine_label"&&E===2&&M=="Point"?(a.getText().setText(f.get("name_en")),a.getText().setFont('italic 11px "Open Sans", "Arial Unicode MS"'),n.setColor("#74aee9"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(1),d[g++]=a):u=="marine_label"&&E===3&&M=="Point"?(a.getText().setText(f.get("name_en")),a.getText().setFont('italic 10px "Open Sans", "Arial Unicode MS"'),n.setColor("#74aee9"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(1),d[g++]=a):u=="marine_label"&&E===4&&M=="Point"?(a.getText().setText(f.get("name_en")),a.getText().setFont('italic 9px "Open Sans", "Arial Unicode MS"'),n.setColor("#74aee9"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(1),d[g++]=a):u=="place_label"&&m=="city"&&T<=1222.99245256282?(a.getText().setText(f.get("name_en")),a.getText().setFont('11px "Open Sans", "Arial Unicode MS"'),n.setColor("#333"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(1),d[g++]=a):u=="place_label"&&m=="town"&&T<=305.748113140705?(a.getText().setText(f.get("name_en")),a.getText().setFont('9px "Open Sans", "Arial Unicode MS"'),n.setColor("#333"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(1),d[g++]=a):u=="place_label"&&m=="village"&&T<=38.21851414258813?(a.getText().setText(f.get("name_en")),a.getText().setFont('8px "Open Sans", "Arial Unicode MS"'),n.setColor("#333"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(1),d[g++]=a):u=="place_label"&&T<=19.109257071294063&&(m=="hamlet"||m=="suburb"||m=="neighbourhood")?(a.getText().setText(f.get("name_en")),a.getText().setFont('bold 9px "Arial Narrow"'),n.setColor("#633"),r.setColor("rgba(255,255,255,0.8)"),r.setWidth(1),d[g++]=a):(u=="poi_label"&&T<=19.109257071294063&&w==1&&F!=="marker"||u=="poi_label"&&T<=9.554628535647032&&w==2&&F!=="marker"||u=="poi_label"&&T<=4.777314267823516&&w==3&&F!=="marker"||u=="poi_label"&&T<=2.388657133911758&&w==4&&F!=="marker"||u=="poi_label"&&T<=1.194328566955879&&w>=5&&F!=="marker")&&(d[g++]=y(F)):(r.setColor("#cfcdca"),r.setWidth(1),d[g++]=l):(r.setColor("#cfcdca"),r.setWidth(1),d[g++]=l):(r.setColor("#cfcdca"),r.setWidth(1),d[g++]=l):(r.setColor("#a0c8f0"),r.setWidth(1),d[g++]=l),d.length=g,d}}function Dt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var q={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */q.read=function(t,e,i,s,o){var n,r,h=o*8-s-1,c=(1<<h)-1,l=c>>1,a=-7,x=i?o-1:0,y=i?-1:1,d=t[e+x];for(x+=y,n=d&(1<<-a)-1,d>>=-a,a+=h;a>0;n=n*256+t[e+x],x+=y,a-=8);for(r=n&(1<<-a)-1,n>>=-a,a+=s;a>0;r=r*256+t[e+x],x+=y,a-=8);if(n===0)n=1-l;else{if(n===c)return r?NaN:(d?-1:1)*(1/0);r=r+Math.pow(2,s),n=n-l}return(d?-1:1)*r*Math.pow(2,n-s)};q.write=function(t,e,i,s,o,n){var r,h,c,l=n*8-o-1,a=(1<<l)-1,x=a>>1,y=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=s?0:n-1,f=s?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,r=a):(r=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-r))<1&&(r--,c*=2),r+x>=1?e+=y/c:e+=y*Math.pow(2,1-x),e*c>=2&&(r++,c/=2),r+x>=a?(h=0,r=a):r+x>=1?(h=(e*c-1)*Math.pow(2,o),r=r+x):(h=e*Math.pow(2,x-1)*Math.pow(2,o),r=0));o>=8;t[i+d]=h&255,d+=f,h/=256,o-=8);for(r=r<<o|h,l+=o;l>0;t[i+d]=r&255,d+=f,r/=256,l-=8);t[i+d-f]|=T*128};var kt=_,H=q;function _(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}_.Varint=0;_.Fixed64=1;_.Bytes=2;_.Fixed32=5;var Q=65536*65536,ae=1/Q,Lt=12,ye=typeof TextDecoder>"u"?null:new TextDecoder("utf8");_.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var s=this.readVarint(),o=s>>3,n=this.pos;this.type=s&7,t(o,e,this),this.pos===n&&this.skip(s)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=K(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=de(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=K(this.buf,this.pos)+K(this.buf,this.pos+4)*Q;return this.pos+=8,t},readSFixed64:function(){var t=K(this.buf,this.pos)+de(this.buf,this.pos+4)*Q;return this.pos+=8,t},readFloat:function(){var t=H.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=H.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,i,s;return s=e[this.pos++],i=s&127,s<128||(s=e[this.pos++],i|=(s&127)<<7,s<128)||(s=e[this.pos++],i|=(s&127)<<14,s<128)||(s=e[this.pos++],i|=(s&127)<<21,s<128)?i:(s=e[this.pos],i|=(s&15)<<28,Ot(i,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=Lt&&ye?Qt(this.buf,e,t):$t(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==_.Bytes)return t.push(this.readVarint(e));var i=b(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==_.Bytes)return t.push(this.readSVarint());var e=b(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==_.Bytes)return t.push(this.readBoolean());var e=b(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==_.Bytes)return t.push(this.readFloat());var e=b(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==_.Bytes)return t.push(this.readDouble());var e=b(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==_.Bytes)return t.push(this.readFixed32());var e=b(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==_.Bytes)return t.push(this.readSFixed32());var e=b(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==_.Bytes)return t.push(this.readFixed64());var e=b(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==_.Bytes)return t.push(this.readSFixed64());var e=b(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=t&7;if(e===_.Varint)for(;this.buf[this.pos++]>127;);else if(e===_.Bytes)this.pos=this.readVarint()+this.pos;else if(e===_.Fixed32)this.pos+=4;else if(e===_.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),L(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),L(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),L(this.buf,t&-1,this.pos),L(this.buf,Math.floor(t*ae),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),L(this.buf,t&-1,this.pos),L(this.buf,Math.floor(t*ae),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){At(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var e=this.pos;this.pos=Jt(this.buf,t,this.pos);var i=this.pos-e;i>=128&&le(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),H.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),H.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var s=this.pos-i;s>=128&&le(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeMessage:function(t,e,i){this.writeTag(t,_.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Nt,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Wt,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Zt,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Ut,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,zt,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Ht,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Kt,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Xt,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Yt,e)},writeBytesField:function(t,e){this.writeTag(t,_.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,_.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,_.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,_.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,_.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,_.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,_.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,_.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,_.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,_.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};function Ot(t,e,i){var s=i.buf,o,n;if(n=s[i.pos++],o=(n&112)>>4,n<128||(n=s[i.pos++],o|=(n&127)<<3,n<128)||(n=s[i.pos++],o|=(n&127)<<10,n<128)||(n=s[i.pos++],o|=(n&127)<<17,n<128)||(n=s[i.pos++],o|=(n&127)<<24,n<128)||(n=s[i.pos++],o|=(n&1)<<31,n<128))return k(t,o,e);throw new Error("Expected varint not more than 10 bytes")}function b(t){return t.type===_.Bytes?t.readVarint()+t.pos:t.pos+1}function k(t,e,i){return i?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function At(t,e){var i,s;if(t>=0?(i=t%4294967296|0,s=t/4294967296|0):(i=~(-t%4294967296),s=~(-t/4294967296),i^4294967295?i=i+1|0:(i=0,s=s+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),jt(i,s,e),Bt(s,e)}function jt(t,e,i){i.buf[i.pos++]=t&127|128,t>>>=7,i.buf[i.pos++]=t&127|128,t>>>=7,i.buf[i.pos++]=t&127|128,t>>>=7,i.buf[i.pos++]=t&127|128,t>>>=7,i.buf[i.pos]=t&127}function Bt(t,e){var i=(t&7)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function le(t,e,i){var s=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));i.realloc(s);for(var o=i.pos-1;o>=t;o--)i.buf[o+s]=i.buf[o]}function Nt(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Wt(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Ut(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function zt(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Zt(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Ht(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Kt(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Xt(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Yt(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function K(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+t[e+3]*16777216}function L(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function de(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function $t(t,e,i){for(var s="",o=e;o<i;){var n=t[o],r=null,h=n>239?4:n>223?3:n>191?2:1;if(o+h>i)break;var c,l,a;h===1?n<128&&(r=n):h===2?(c=t[o+1],(c&192)===128&&(r=(n&31)<<6|c&63,r<=127&&(r=null))):h===3?(c=t[o+1],l=t[o+2],(c&192)===128&&(l&192)===128&&(r=(n&15)<<12|(c&63)<<6|l&63,(r<=2047||r>=55296&&r<=57343)&&(r=null))):h===4&&(c=t[o+1],l=t[o+2],a=t[o+3],(c&192)===128&&(l&192)===128&&(a&192)===128&&(r=(n&15)<<18|(c&63)<<12|(l&63)<<6|a&63,(r<=65535||r>=1114112)&&(r=null))),r===null?(r=65533,h=1):r>65535&&(r-=65536,s+=String.fromCharCode(r>>>10&1023|55296),r=56320|r&1023),s+=String.fromCharCode(r),o+=h}return s}function Qt(t,e,i){return ye.decode(t.subarray(e,i))}function Jt(t,e,i){for(var s=0,o,n;s<e.length;s++){if(o=e.charCodeAt(s),o>55295&&o<57344)if(n)if(o<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=o;continue}else o=n-55296<<10|o-56320|65536,n=null;else{o>56319||s+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=o;continue}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);o<128?t[i++]=o:(o<2048?t[i++]=o>>6|192:(o<65536?t[i++]=o>>12|224:(t[i++]=o>>18|240,t[i++]=o>>12&63|128),t[i++]=o>>6&63|128),t[i++]=o&63|128)}return i}const qt=Dt(kt),ce=fe();class z{constructor(e,i,s,o,n){this.styleFunction,this.extent_,this.id_=n,this.type_=e,this.flatCoordinates_=i,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=s,this.properties_=o}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Ge(this.flatCoordinates_):Ve(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Ie(this.getExtent());this.flatInteriorPoints_=be(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Ce(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=De(this.flatCoordinates_,0,this.ends_,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=ee(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let i=0;const s=this.ends_;for(let o=0,n=s.length;o<n;++o){const r=s[o],h=ee(e,i,r,2,.5);ke(this.flatMidpoints_,h),i=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,i){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=J(e);const i=e.getExtent(),s=e.getWorldExtent();if(i&&s){const o=te(s)/te(i);Le(ce,s[0],s[3],o,-o,0,0,0),Oe(this.flatCoordinates_,0,this.flatCoordinates_.length,2,ce,this.flatCoordinates_)}}getEnds(){return this.ends_}}z.prototype.getEndss=z.prototype.getEnds;z.prototype.getFlatCoordinates=z.prototype.getOrientedFlatCoordinates;const he=z;class ei extends Se{constructor(e){super(),e=e||{},this.dataProjection=new Ae({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:he,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,i,s,o){e.pos=i.geometry;const n=e.readVarint()+e.pos;let r=1,h=0,c=0,l=0,a=0,x=0;for(;e.pos<n;){if(!h){const y=e.readVarint();r=y&7,h=y>>3}if(h--,r===1||r===2)c+=e.readSVarint(),l+=e.readSVarint(),r===1&&a>x&&(o.push(a),x=a),s.push(c,l),a+=2;else if(r===7)a>x&&(s.push(s[x],s[x+1]),a+=2);else throw new Error("Invalid command found in the PBF")}a>x&&(o.push(a),x=a)}createFeature_(e,i,s){const o=i.type;if(o===0)return null;let n;const r=i.properties;let h;this.idProperty_?(h=r[this.idProperty_],delete r[this.idProperty_]):h=i.id,r[this.layerName_]=i.layer.name;const c=[],l=[];this.readRawGeometry_(e,i,c,l);const a=oi(o,l.length);if(this.featureClass_===he)n=new this.featureClass_(a,c,l,r,h),n.transform(s.dataProjection);else{let x;if(a=="Polygon"){const f=je(c,l);x=f.length>1?new ve(c,"XY",f):new Be(c,"XY",l)}else x=a==="Point"?new Ne(c,"XY"):a==="LineString"?new Ee(c,"XY"):a==="MultiPoint"?new Re(c,"XY"):a==="MultiLineString"?new Pe(c,"XY",l):null;const y=this.featureClass_;n=new y,this.geometryName_&&n.setGeometryName(this.geometryName_);const d=Me(x,!1,s);n.setGeometry(d),h!==void 0&&n.setId(h),n.setProperties(r,!0)}return n}getType(){return"arraybuffer"}readFeatures(e,i){const s=this.layers_;i=this.adaptOptions(i);const o=J(i.dataProjection);o.setWorldExtent(i.extent),i.dataProjection=o;const n=new qt(e),r=n.readFields(ti,{}),h=[];for(const c in r){if(s&&!s.includes(c))continue;const l=r[c],a=l?[0,0,l.extent,l.extent]:null;o.setExtent(a);for(let x=0,y=l.length;x<y;++x){const d=si(n,l,x),f=this.createFeature_(n,d,i);f!==null&&h.push(f)}}return h}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function ti(t,e,i){if(t===3){const s={keys:[],values:[],features:[]},o=i.readVarint()+i.pos;i.readFields(ii,s,o),s.length=s.features.length,s.length&&(e[s.name]=s)}}function ii(t,e,i){if(t===15)e.version=i.readVarint();else if(t===1)e.name=i.readString();else if(t===5)e.extent=i.readVarint();else if(t===2)e.features.push(i.pos);else if(t===3)e.keys.push(i.readString());else if(t===4){let s=null;const o=i.readVarint()+i.pos;for(;i.pos<o;)t=i.readVarint()>>3,s=t===1?i.readString():t===2?i.readFloat():t===3?i.readDouble():t===4?i.readVarint64():t===5?i.readVarint():t===6?i.readSVarint():t===7?i.readBoolean():null;e.values.push(s)}}function ri(t,e,i){if(t==1)e.id=i.readVarint();else if(t==2){const s=i.readVarint()+i.pos;for(;i.pos<s;){const o=e.layer.keys[i.readVarint()],n=e.layer.values[i.readVarint()];e.properties[o]=n}}else t==3?e.type=i.readVarint():t==4&&(e.geometry=i.pos)}function si(t,e,i){t.pos=e.features[i];const s=t.readVarint()+t.pos,o={layer:e,type:0,properties:{}};return t.readFields(ri,o,s),o}function oi(t,e){let i;return t===1?i=e===1?"Point":"MultiPoint":t===2?i=e===1?"LineString":"MultiLineString":t===3&&(i="Polygon"),i}const ni=ei,ai={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},li={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class di extends We{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=fe()}prepareTile(e,i,s){let o;const n=e.getState();return(n===C.LOADED||n===C.ERROR)&&(this.updateExecutorGroup_(e,i,s),this.tileImageNeedsRender_(e)&&(o=!0)),o}getTile(e,i,s,o){const n=o.pixelRatio,r=o.viewState,h=r.resolution,c=r.projection,l=this.getLayer(),a=l.getSource().getTile(e,i,s,n,c),x=o.viewHints,y=!(x[D.ANIMATING]||x[D.INTERACTING]);return(y||!a.wantedResolution)&&(a.wantedResolution=h),this.prepareTile(a,n,c)&&(y||Date.now()-o.time<8)&&l.getRenderMode()!=="vector"&&this.renderTileImage_(a,o),super.getTile(e,i,s,o)}isDrawableTile(e){const i=this.getLayer();return super.isDrawableTile(e)&&(i.getRenderMode()==="vector"?V(i)in e.executorGroups:e.hasContext(i))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const i=this.getLayer().getRevision();return this.renderedLayerRevision_!==i&&(this.renderedLayerRevision_=i,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,i,s){const o=this.getLayer(),n=o.getRevision(),r=o.getRenderOrder()||null,h=e.wantedResolution,c=e.getReplayState(o);if(!c.dirty&&c.renderedResolution===h&&c.renderedRevision==n&&c.renderedRenderOrder==r)return;const l=o.getSource(),a=o.getDeclutter(),x=l.getTileGrid(),d=l.getTileGridForProjection(s).getTileCoordExtent(e.wrappedTileCoord),f=l.getSourceTiles(i,s,e),T=V(o);delete e.hitDetectionImageData[T],e.executorGroups[T]=[],a&&(e.declutterExecutorGroups[T]=[]),c.dirty=!1;for(let g=0,u=f.length;g<u;++g){const p=f[g];if(p.getState()!=C.LOADED)continue;const m=p.tileCoord,w=x.getTileCoordExtent(m),E=ge(d,w),R=U(E,o.getRenderBuffer()*h,this.tmpExtent),v=Ue(w,E)?null:R,S=new se(0,R,h,i),F=a?new se(0,E,h,i):void 0,M=ht(h,i),P=function(I){let j;const B=I.getStyleFunction()||o.getStyleFunction();if(B&&(j=B(I,h)),j){const Fe=this.renderFeature(I,M,j,S,F);c.dirty=c.dirty||Fe}},X=p.getFeatures();r&&r!==c.renderedRenderOrder&&X.sort(r);for(let I=0,j=X.length;I<j;++I){const B=X[I];(!v||O(v,B.getGeometry().getExtent()))&&P.call(this,B)}const me=S.finish(),we=o.getRenderMode()!=="vector"&&a&&f.length===1?null:E,_e=new oe(we,h,i,l.getOverlaps(),me,o.getRenderBuffer());if(e.executorGroups[T].push(_e),F){const I=new oe(null,h,i,l.getOverlaps(),F.finish(),o.getRenderBuffer());e.declutterExecutorGroups[T].push(I)}}c.renderedRevision=n,c.renderedRenderOrder=r,c.renderedResolution=h}forEachFeatureAtCoordinate(e,i,s,o,n){const r=i.viewState.resolution,h=i.viewState.rotation;s=s??0;const c=this.getLayer(),a=c.getSource().getTileGridForProjection(i.viewState.projection),x=ze([e]);U(x,r*s,x);const y={},d=function(g,u,p){let m=g.getId();m===void 0&&(m=V(g));const w=y[m];if(w){if(w!==!0&&p<w.distanceSq){if(p===0)return y[m]=!0,n.splice(n.lastIndexOf(w),1),o(g,c,u);w.geometry=u,w.distanceSq=p}}else{if(p===0)return y[m]=!0,o(g,c,u);n.push(y[m]={feature:g,layer:c,geometry:u,distanceSq:p,callback:o})}},f=this.renderedTiles;let T;for(let g=0,u=f.length;!T&&g<u;++g){const p=f[g],m=a.getTileCoordExtent(p.wrappedTileCoord);if(!O(m,x))continue;const w=V(c),E=[p.executorGroups[w]],R=p.declutterExecutorGroups[w];R&&E.push(R),E.some(v=>{const S=v===R?i.declutterTree.all().map(F=>F.value):null;for(let F=0,M=v.length;F<M;++F)if(T=v[F].forEachFeatureAtCoordinate(e,r,h,s,d,S),T)return!0})}return T}getFeatures(e){return new Promise((i,s)=>{const o=this.getLayer(),n=V(o),r=o.getSource(),h=this.renderedProjection,c=h.getExtent(),l=this.renderedResolution,a=r.getTileGridForProjection(h),x=Ze(this.renderedPixelToCoordinateTransform_,e.slice()),y=a.getTileCoordForCoordAndResolution(x,l);let d;for(let m=0,w=this.renderedTiles.length;m<w;++m)if(y.toString()===this.renderedTiles[m].tileCoord.toString()){if(d=this.renderedTiles[m],d.getState()===C.LOADED){const E=a.getTileCoordExtent(d.tileCoord);r.getWrapX()&&h.canWrapX()&&!He(c,E)&&Ke(x,h);break}d=void 0}if(!d||d.loadingSourceTiles>0){i([]);return}const f=a.getTileCoordExtent(d.wrappedTileCoord),T=Xe(f),g=[(x[0]-T[0])/l,(T[1]-x[1])/l],u=d.getSourceTiles().reduce(function(m,w){return m.concat(w.getFeatures())},[]);let p=d.hitDetectionImageData[n];if(!p){const m=pe(a.getTileSize(a.getZForResolution(l,r.zDirection))),w=this.renderedRotation_,E=[this.getRenderTransform(a.getTileCoordCenter(d.wrappedTileCoord),l,0,$,m[0]*$,m[1]*$,0)];p=ut(m,E,u,o.getStyleFunction(),a.getTileCoordExtent(d.wrappedTileCoord),d.getReplayState(o).renderedResolution,w),d.hitDetectionImageData[n]=p}i(ft(g,u,p))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const i=this.context,s=i.globalAlpha;i.globalAlpha=this.getLayer().getOpacity();const o=e.viewHints,n=!(o[D.ANIMATING]||o[D.INTERACTING]),r=this.renderedTiles;for(let h=0,c=r.length;h<c;++h){const l=r[h],a=l.declutterExecutorGroups[V(this.getLayer())];if(a)for(let x=a.length-1;x>=0;--x)a[x].execute(this.context,1,this.getTileRenderTransform(l,e),e.viewState.rotation,n,void 0,e.declutterTree)}i.globalAlpha=s}getTileRenderTransform(e,i){const s=i.pixelRatio,o=i.viewState,n=o.center,r=o.resolution,h=o.rotation,c=i.size,l=Math.round(c[0]*s),a=Math.round(c[1]*s),y=this.getLayer().getSource().getTileGridForProjection(i.viewState.projection),d=e.tileCoord,f=y.getTileCoordExtent(e.wrappedTileCoord),T=y.getTileCoordExtent(d,this.tmpExtent)[0]-f[0];return Ye(Y(this.inversePixelTransform.slice(),1/s,1/s),this.getRenderTransform(n,r,h,s,l,a,T))}postRender(e,i){const s=i.viewHints,o=!(s[D.ANIMATING]||s[D.INTERACTING]);this.renderedPixelToCoordinateTransform_=i.pixelToCoordinateTransform.slice(),this.renderedRotation_=i.viewState.rotation;const n=this.getLayer(),r=n.getRenderMode(),h=e.globalAlpha;e.globalAlpha=n.getOpacity();const c=li[r],l=i.viewState,a=l.rotation,x=n.getSource(),d=x.getTileGridForProjection(l.projection).getZForResolution(l.resolution,x.zDirection),f=this.renderedTiles,T=[],g=[];let u=!0;for(let p=f.length-1;p>=0;--p){const m=f[p];u=u&&!m.getReplayState(n).dirty;const w=m.executorGroups[V(n)].filter(F=>F.hasExecutors(c));if(w.length===0)continue;const E=this.getTileRenderTransform(m,i),R=m.tileCoord[0];let v=!1;const S=w[0].getClipCoords(E);if(S){for(let F=0,M=T.length;F<M;++F)if(d!==R&&R<g[F]){const P=T[F];O([S[0],S[3],S[4],S[7]],[P[0],P[3],P[4],P[7]])&&(v||(e.save(),v=!0),e.beginPath(),e.moveTo(S[0],S[1]),e.lineTo(S[2],S[3]),e.lineTo(S[4],S[5]),e.lineTo(S[6],S[7]),e.moveTo(P[6],P[7]),e.lineTo(P[4],P[5]),e.lineTo(P[2],P[3]),e.lineTo(P[0],P[1]),e.clip())}T.push(S),g.push(R)}for(let F=0,M=w.length;F<M;++F)w[F].execute(e,1,E,a,o,c);v&&e.restore()}e.globalAlpha=h,this.ready=u,super.postRender(e,i)}renderFeature(e,i,s,o,n){if(!s)return!1;let r=!1;if(Array.isArray(s))for(let h=0,c=s.length;h<c;++h)r=ne(o,e,s[h],i,this.boundHandleStyleImageChange_,void 0,n)||r;else r=ne(o,e,s,i,this.boundHandleStyleImageChange_,void 0,n);return r}tileImageNeedsRender_(e){const i=this.getLayer();if(i.getRenderMode()==="vector")return!1;const s=e.getReplayState(i),o=i.getRevision(),n=e.wantedResolution;return s.renderedTileResolution!==n||s.renderedTileRevision!==o}renderTileImage_(e,i){const s=this.getLayer(),o=e.getReplayState(s),n=s.getRevision(),r=e.executorGroups[V(s)];o.renderedTileRevision=n;const h=e.wrappedTileCoord,c=h[0],l=s.getSource();let a=i.pixelRatio;const y=i.viewState.projection,d=l.getTileGridForProjection(y),f=d.getResolution(e.tileCoord[0]),T=i.pixelRatio/e.wantedResolution*f,g=d.getResolution(c),u=e.getContext(s);a=Math.round(Math.max(a,T/a));const p=l.getTilePixelSize(c,a,y);u.canvas.width=p[0],u.canvas.height=p[1];const m=a/T;if(m!==1){const v=ie(this.tmpTransform_);Y(v,m,m),u.setTransform.apply(u,v)}const w=d.getTileCoordExtent(h,this.tmpExtent),E=T/g,R=ie(this.tmpTransform_);Y(R,E,-E),$e(R,-w[0],-w[3]);for(let v=0,S=r.length;v<S;++v)r[v].execute(u,m,R,0,!0,ai[s.getRenderMode()]);o.renderedTileResolution=e.wantedResolution}}const ci=di;class hi extends gt{constructor(e){e=e||{};const i=Object.assign({},e);delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un;const s=e.renderMode||"hybrid";Qe(s=="hybrid"||s=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=s,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new ci(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Z.PRELOAD)}getUseInterimTilesOnError(){return this.get(Z.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Z.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Z.USE_INTERIM_TILES_ON_ERROR,e)}}const ui=hi;let fi=class extends xe{constructor(e,i,s,o,n,r){super(e,i,r),this.extent=null,this.format_=o,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=n,this.url_=s,this.key=s}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==C.IDLE&&(this.setState(C.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,i){this.setFeatures(e)}onError(){this.setState(C.ERROR)}setFeatures(e){this.features_=e,this.setState(C.LOADED)}setLoader(e){this.loader_=e}};const gi=fi,ue=[];class pi extends xe{constructor(e,i,s,o){super(e,i,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=o.bind(void 0,this),this.wrappedTileCoord=s}getContext(e){const i=V(e);return i in this.context_||(this.context_[i]=Je(1,1,ue)),this.context_[i]}hasContext(e){return V(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const i=V(e);return i in this.replayState_||(this.replayState_[i]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[i]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const i=this.context_[e];qe(i),ue.push(i.canvas),delete this.context_[e]}super.release()}}const xi=pi;class Ti extends et{constructor(e){const i=e.projection||"EPSG:3857",s=e.extent||tt(i),o=e.tileGrid||it({extent:s,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:i,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:mi,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new rt(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:gi,this.tileGrids_={}}getFeaturesInExtent(e){const i=[],s=this.tileCache;if(s.getCount()===0)return i;const o=st(s.peekFirstKey())[0],n=this.tileGrid;return s.forEach(function(r){if(r.tileCoord[0]!==o||r.getState()!==C.LOADED)return;const h=r.getSourceTiles();for(let c=0,l=h.length;c<l;++c){const a=h[c],x=a.tileCoord;if(O(e,n.getTileCoordExtent(x))){const y=a.getFeatures();if(y)for(let d=0,f=y.length;d<f;++d){const T=y[d],g=T.getGeometry();O(e,g.getExtent())&&i.push(T)}}}}),i}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,i){const s=this.getTileCacheForProjection(e),o=Object.keys(i).reduce((n,r)=>{const h=ot(r),c=s.peek(h);if(c){const l=c.sourceTiles;for(let a=0,x=l.length;a<x;++a)n[l[a].getKey()]=!0}return n},{});super.expireCache(e,i),this.sourceTileCache.expireCache(o)}getSourceTiles(e,i,s){if(s.getState()===C.IDLE){s.setState(C.LOADING);const o=s.wrappedTileCoord,n=this.getTileGridForProjection(i),r=n.getTileCoordExtent(o),h=o[0],c=n.getResolution(h);U(r,-c,r);const l=this.tileGrid,a=l.getExtent();a&&ge(r,a,r);const x=l.getZForResolution(c,this.zDirection);l.forEachTileCoord(r,x,y=>{const d=this.tileUrlFunction(y,e,i),f=this.sourceTileCache.containsKey(d)?this.sourceTileCache.get(d):new this.tileClass(y,d?C.IDLE:C.EMPTY,d,this.format_,this.tileLoadFunction);s.sourceTiles.push(f);const T=f.getState();if(T<C.LOADED){const g=u=>{this.handleTileChange(u);const p=f.getState();if(p===C.LOADED||p===C.ERROR){const m=f.getKey();m in s.errorTileKeys?f.getState()===C.LOADED&&delete s.errorTileKeys[m]:s.loadingSourceTiles--,p===C.ERROR?s.errorTileKeys[m]=!0:f.removeEventListener(re.CHANGE,g),s.loadingSourceTiles===0&&s.setState(nt(s.errorTileKeys)?C.LOADED:C.ERROR)}};f.addEventListener(re.CHANGE,g),s.loadingSourceTiles++}T===C.IDLE&&(f.extent=l.getTileCoordExtent(y),f.projection=i,f.resolution=l.getResolution(y[0]),this.sourceTileCache.set(d,f),f.load())}),s.loadingSourceTiles||s.setState(s.sourceTiles.some(y=>y.getState()===C.ERROR)?C.ERROR:C.LOADED)}return s.sourceTiles}getTile(e,i,s,o,n){const r=at(e,i,s),h=this.getKey();let c;if(this.tileCache.containsKey(r)&&(c=this.tileCache.get(r),c.key===h))return c;const l=[e,i,s];let a=this.getTileCoordForTileUrlFunction(l,n);const x=this.getTileGrid().getExtent(),y=this.getTileGridForProjection(n);if(a&&x){const T=y.getTileCoordExtent(a);U(T,-y.getResolution(e),T),O(x,T)||(a=null)}let d=!0;if(a!==null){const T=this.tileGrid,g=y.getResolution(e),u=T.getZForResolution(g,1),p=y.getTileCoordExtent(a);U(p,-g,p),T.forEachTileCoord(p,u,m=>{d=d&&!this.tileUrlFunction(m,o,n)})}const f=new xi(l,d?C.EMPTY:C.IDLE,a,this.getSourceTiles.bind(this,o,n));return f.key=h,c?(f.interimTile=c,f.refreshInterimChain(),this.tileCache.replace(r,f)):this.tileCache.set(r,f),f}getTileGridForProjection(e){const i=e.getCode();let s=this.tileGrids_[i];if(!s){const o=this.tileGrid,n=o.getResolutions().slice(),r=n.map(function(l,a){return o.getOrigin(a)}),h=n.map(function(l,a){return o.getTileSize(a)}),c=lt+1;for(let l=n.length;l<c;++l)n.push(n[l-1]/2),r.push(r[l-1]),h.push(h[l-1]);s=new Te({extent:o.getExtent(),origins:r,resolutions:n,tileSizes:h}),this.tileGrids_[i]=s}return s}getTilePixelRatio(e){return e}getTilePixelSize(e,i,s){const o=this.getTileGridForProjection(s),n=pe(o.getTileSize(e),this.tmpSize);return[Math.round(n[0]*i),Math.round(n[1]*i)]}updateCacheSize(e,i){super.updateCacheSize(e*2,i),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(i).highWaterMark}}const yi=Ti;function mi(t,e){t.setLoader(function(i,s,o){pt(e,t.getFormat(),i,s,o,t.onLoad.bind(t),t.onError.bind(t))})}const A=t=>(Et("data-v-260990da"),t=t(),Rt(),t),wi={id:"title"},_i=A(()=>G("div",{id:"map",class:"map"},null,-1)),Fi=A(()=>G("p",null,"A vector tiles map which reuses the same source tiles for subsequent zoom levels to save bandwidth on mobile devices. Note: No map will be visible when the access token has expired.",-1)),Ci=A(()=>G("h5",{class:"source-heading"},"html",-1)),Si={class:"language-html"},vi=A(()=>G("h5",{class:"source-heading"},"css",-1)),Ei={class:"language-css"},Ri=A(()=>G("h5",{class:"source-heading"},"js",-1)),Pi={class:"language-js"},Mi=A(()=>G("h5",{class:"source-heading"},"package.json",-1)),Gi={class:"language-json"},Vi={__name:"index",setup(t){return Ft(()=>{const e="pk.eyJ1Ijoic2lsZW5nIiwiYSI6ImNsb3N5Z2hjdDA0ZWQya2xxN2x5cGd3MTAifQ.Fe6VQp9WZpDi705C_vpBig",i=[];for(let o=0;o<=8;++o)i.push(156543.03392804097/Math.pow(2,o*2));function s(o){return("https://{a-d}.tiles.mapbox.com/v4/mapbox.mapbox-streets-v6/{z}/{x}/{y}.vector.pbf?access_token="+e).replace("{z}",String(o[0]*2-1)).replace("{x}",String(o[1])).replace("{y}",String(o[2])).replace("{a-d}","abcd".substr(((o[1]<<o[0])+o[2])%4,1))}new dt({layers:[new ui({source:new yi({attributions:'© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',format:new ni,tileGrid:new Te({extent:J("EPSG:3857").getExtent(),resolutions:i,tileSize:512}),tileUrlFunction:s}),style:bt(wt,mt,yt,Tt,xt)})],target:"map",view:new ct({center:[0,0],minZoom:1,zoom:2})}),Prism.highlightAll()}),(e,i)=>(Ct(),St(vt,null,[G("h4",wi,N(W(Pt)),1),_i,Fi,Ci,G("pre",null,[G("code",Si,N("  "+W(Mt).trim().toString()),1)]),vi,G("pre",null,[G("code",Ei,N("  "+W(Gt).trim().toString()),1)]),Ri,G("pre",null,[G("code",Pi,N("  "+W(Vt).trim().toString()),1)]),Mi,G("pre",null,[G("code",Gi,N("  "+W(It).trim()),1)])],64))}},Oi=_t(Vi,[["__scopeId","data-v-260990da"]]);export{Oi as default};
