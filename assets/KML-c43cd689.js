import{F as St}from"./featureloader-a90a5108.js";import{b1 as R,ac as pt,g as Et,a as Z,F as Te,I as ze,S as Ee,T as Xe,U as Be,P as Nt,c2 as j,aK as Rt,cN as _t}from"./Layer-3b715193.js";import{G as K,a as Ke,M as At}from"./MultiPolygon-d7736349.js";import{L as Ze}from"./LineString-eed53b5a.js";import{M as Lt}from"./MultiPoint-74fca651.js";import{F as Tt,t as He}from"./Feature-627996e0.js";import{p as ee}from"./string-30bf5402.js";const Ce="http://www.w3.org/2001/XMLSchema-instance";function re(r,e){return q().createElementNS(r,e)}function C(r,e){return Qe(r,e,[]).join("")}function Qe(r,e,t){if(r.nodeType==Node.CDATA_SECTION_NODE||r.nodeType==Node.TEXT_NODE)e?t.push(String(r.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(r.nodeValue);else{let n;for(n=r.firstChild;n;n=n.nextSibling)Qe(n,e,t)}return t}function v(r){return"documentElement"in r}function b(r){return new DOMParser().parseFromString(r,"application/xml")}function Me(r,e){return function(t,n){const o=r.call(e!==void 0?e:this,t,n);if(o!==void 0){const i=n[n.length-1];R(i,o)}}}function Y(r,e){return function(t,n){const o=r.call(e!==void 0?e:this,t,n);o!==void 0&&n[n.length-1].push(o)}}function xe(r,e){return function(t,n){const o=r.call(e!==void 0?e:this,t,n);o!==void 0&&(n[n.length-1]=o)}}function c(r,e,t){return function(n,o){const i=r.call(t!==void 0?t:this,n,o);if(i!==void 0){const s=o[o.length-1],l=e!==void 0?e:n.localName;s[l]=i}}}function m(r,e){return function(t,n,o){r.call(e!==void 0?e:this,t,n,o),o[o.length-1].node.appendChild(t)}}function xo(r,e){let t,n;return function(o,i,s){if(t===void 0){t={};const l={};l[o.localName]=r,t[o.namespaceURI]=l,n=M(o.localName)}Ve(t,n,i,s)}}function M(r,e){return function(t,n,o){const s=n[n.length-1].node;let l=r;l===void 0&&(l=o);const a=e!==void 0?e:s.namespaceURI;return re(a,l)}}const I=M();function O(r,e){const t=e.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=r[e[o]];return n}function f(r,e,t){t=t!==void 0?t:{};let n,o;for(n=0,o=r.length;n<o;++n)t[r[n]]=e;return t}function $(r,e,t,n){let o;for(o=e.firstElementChild;o;o=o.nextElementSibling){const i=r[o.namespaceURI];if(i!==void 0){const s=i[o.localName];s!==void 0&&s.call(n,o,t)}}}function y(r,e,t,n,o){return n.push(r),$(e,t,n,o),n.pop()}function Ve(r,e,t,n,o,i){const s=(o!==void 0?o:t).length;let l,a;for(let u=0;u<s;++u)l=t[u],l!==void 0&&(a=e.call(i!==void 0?i:this,l,n,o!==void 0?o[u]:void 0),a!==void 0&&r[a.namespaceURI][a.localName].call(i,a,l,n))}function E(r,e,t,n,o,i,s){return o.push(r),Ve(e,t,n,o,i,s),o.pop()}let ye;function xt(){return ye===void 0&&typeof XMLSerializer<"u"&&(ye=new XMLSerializer),ye}let he;function q(){return he===void 0&&typeof document<"u"&&(he=document.implementation.createDocument("","",null)),he}class Ft extends Tt{constructor(){super(),this.xmlSerializer_=xt()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const n=b(e);return this.readFeatureFromDocument(n,t)}return v(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const n=this.readFeaturesFromDocument(e,t);return n.length>0?n[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const n=b(e);return this.readFeaturesFromDocument(n,t)}return v(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const n=[];for(let o=e.firstChild;o;o=o.nextSibling)o.nodeType==Node.ELEMENT_NODE&&R(n,this.readFeaturesFromNode(o,t));return n}readFeaturesFromNode(e,t){return pt()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const n=b(e);return this.readGeometryFromDocument(n,t)}return v(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=b(e);return this.readProjectionFromDocument(t)}return v(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const n=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const n=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const n=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(e,t){return null}}const Pt=Ft;function k(r){const e=C(r,!1);return It(e)}function It(r){const e=/^\s*(true|1)|(false|0)\s*$/.exec(r);if(e)return e[1]!==void 0||!1}function Fo(r){const e=C(r,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function p(r){const e=C(r,!1);return wt(e)}function wt(r){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(r);if(e)return parseFloat(e[1])}function Po(r){const e=C(r,!1);return Dt(e)}function Dt(r){const e=/^\s*(\d+)\s*$/.exec(r);if(e)return parseInt(e[1],10)}function L(r){return C(r,!1).trim()}function V(r,e){D(r,e?"1":"0")}function Ot(r,e){r.appendChild(q().createCDATASection(e))}function Io(r,e){const t=new Date(e*1e3),n=t.getUTCFullYear()+"-"+ee(t.getUTCMonth()+1,2)+"-"+ee(t.getUTCDate(),2)+"T"+ee(t.getUTCHours(),2)+":"+ee(t.getUTCMinutes(),2)+":"+ee(t.getUTCSeconds(),2)+"Z";r.appendChild(q().createTextNode(n))}function X(r,e){const t=e.toPrecision();r.appendChild(q().createTextNode(t))}function wo(r,e){const t=e.toString();r.appendChild(q().createTextNode(t))}function D(r,e){r.appendChild(q().createTextNode(e))}const G=["http://www.google.com/kml/ext/2.2"],d=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Ct="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Ue={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Mt=f(d,{ExtendedData:ct,Region:ut,MultiGeometry:c(st,"geometry"),LineString:c(rt,"geometry"),LinearRing:c(it,"geometry"),Point:c(lt,"geometry"),Polygon:c(at,"geometry"),Style:c(Ie),StyleMap:pn,address:c(L),description:c(L),name:c(L),open:c(k),phoneNumber:c(L),styleUrl:c(je),visibility:c(k)},f(G,{MultiTrack:c(rn,"geometry"),Track:c(ot,"geometry")})),Ut=f(d,{ExtendedData:ct,Region:ut,Link:wn,address:c(L),description:c(L),name:c(L),open:c(k),phoneNumber:c(L),visibility:c(k)}),Gt=f(d,{href:c(Je)}),Yt=f(d,{Altitude:c(p),Longitude:c(p),Latitude:c(p),Tilt:c(p),AltitudeMode:c(L),Heading:c(p),Roll:c(p)}),$e=f(d,{LatLonAltBox:An,Lod:Tn}),vt=f(d,["Document","Placemark"]),bt=f(d,{Document:m(vn),Placemark:m(mt)});let H,se=null,Ne,te,ne,oe,ae,Re=null,Fe,_e=null,Ae,B=null,Ge=null,Le=null;function ce(r){return 32/Math.min(r[0],r[1])}function kt(){H=[255,255,255,1],se=new Te({color:H}),Ne=[20,2],te="pixels",ne="pixels",oe=[64,64],ae="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Re=new ze({anchor:Ne,anchorOrigin:"bottom-left",anchorXUnits:te,anchorYUnits:ne,crossOrigin:"anonymous",rotation:0,scale:ce(oe),size:oe,src:ae}),Fe="NO_IMAGE",_e=new Ee({color:H,width:1}),Ae=new Ee({color:[51,51,51,1],width:2}),B=new Xe({font:"bold 16px Helvetica",fill:se,stroke:Ae,scale:.8}),Ge=new Z({fill:se,image:Re,text:B,stroke:_e,zIndex:0}),Le=[Ge]}let ie;function zt(r){return r}class Xt extends Pt{constructor(e){super(),e=e||{},Le||kt(),this.dataProjection=Et("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:Le,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:zt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const n=f(d,{Document:Me(this.readDocumentOrFolder_,this),Folder:Me(this.readDocumentOrFolder_,this),Placemark:Y(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),o=y([],n,e,t,this);if(o)return o}readPlacemark_(e,t){const n=y({geometry:null},Mt,e,t,this);if(!n)return;const o=new St,i=e.getAttribute("id");i!==null&&o.setId(i);const s=t[0],l=n.geometry;if(l&&He(l,!1,s),o.setGeometry(l),delete n.geometry,this.extractStyles_){const a=n.Style,u=n.styleUrl,g=Kt(a,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);o.setStyle(g)}return delete n.Style,o.setProperties(n,!0),o}readSharedStyle_(e,t){const n=e.getAttribute("id");if(n!==null){const o=Ie.call(this,e,t);if(o){let i,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?i=new URL("#"+n,s).href:i="#"+n,this.sharedStyles_[i]=o}}}readSharedStyleMap_(e,t){const n=e.getAttribute("id");if(n===null)return;const o=tt.call(this,e,t);if(!o)return;let i,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?i=new URL("#"+n,s).href:i="#"+n,this.sharedStyles_[i]=o}readFeatureFromNode(e,t){if(!d.includes(e.namespaceURI))return null;const n=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return n||null}readFeaturesFromNode(e,t){if(!d.includes(e.namespaceURI))return[];let n;const o=e.localName;if(o=="Document"||o=="Folder")return n=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),n||[];if(o=="Placemark"){const i=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return i?[i]:[]}if(o=="kml"){n=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling){const s=this.readFeaturesFromNode(i,t);s&&R(n,s)}return n}return[]}readName(e){if(e){if(typeof e=="string"){const t=b(e);return this.readNameFromDocument(t)}return v(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const n=this.readNameFromNode(t);if(n)return n}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(d.includes(t.namespaceURI)&&t.localName=="name")return L(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const n=t.localName;if(d.includes(t.namespaceURI)&&(n=="Document"||n=="Folder"||n=="Placemark"||n=="kml")){const o=this.readNameFromNode(t);if(o)return o}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const n=b(e);R(t,this.readNetworkLinksFromDocument(n))}else v(e)?R(t,this.readNetworkLinksFromDocument(e)):R(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&R(t,this.readNetworkLinksFromNode(n));return t}readNetworkLinksFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(d.includes(n.namespaceURI)&&n.localName=="NetworkLink"){const o=y({},Ut,n,[]);t.push(o)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const o=n.localName;d.includes(n.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")&&R(t,this.readNetworkLinksFromNode(n))}return t}readRegion(e){const t=[];if(typeof e=="string"){const n=b(e);R(t,this.readRegionFromDocument(n))}else v(e)?R(t,this.readRegionFromDocument(e)):R(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&R(t,this.readRegionFromNode(n));return t}readRegionFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(d.includes(n.namespaceURI)&&n.localName=="Region"){const o=y({},$e,n,[]);t.push(o)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const o=n.localName;d.includes(n.namespaceURI)&&(o=="Document"||o=="Folder"||o=="kml")&&R(t,this.readRegionFromNode(n))}return t}readCamera(e){const t=[];if(typeof e=="string"){const n=b(e);R(t,this.readCameraFromDocument(n))}else v(e)?R(t,this.readCameraFromDocument(e)):R(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&R(t,this.readCameraFromNode(n));return t}readCameraFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(d.includes(n.namespaceURI)&&n.localName==="Camera"){const o=y({},Yt,n,[]);t.push(o)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const o=n.localName;d.includes(n.namespaceURI)&&(o==="Document"||o==="Folder"||o==="Placemark"||o==="kml")&&R(t,this.readCameraFromNode(n))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=re(d[4],"kml"),o="http://www.w3.org/2000/xmlns/";n.setAttributeNS(o,"xmlns:gx",G[0]),n.setAttributeNS(o,"xmlns:xsi",Ce),n.setAttributeNS(Ce,"xsi:schemaLocation",Ct);const i={node:n},s={};e.length>1?s.Document=e:e.length==1&&(s.Placemark=e[0]);const l=vt[n.namespaceURI],a=O(s,l);return E(i,bt,I,a,[t],l,this),n}}function Bt(r,e){const t=[0,0];let n="start";const o=r.getImage();if(o){const l=o.getSize();if(l&&l.length==2){const a=o.getScaleArray(),u=o.getAnchor();t[0]=a[0]*(l[0]-u[0]),t[1]=a[1]*(l[1]/2-u[1]),n="left"}}let i=r.getText();return i?(i=i.clone(),i.setFont(i.getFont()||B.getFont()),i.setScale(i.getScale()||B.getScale()),i.setFill(i.getFill()||B.getFill()),i.setStroke(i.getStroke()||Ae)):i=B.clone(),i.setText(e),i.setOffsetX(t[0]),i.setOffsetY(t[1]),i.setTextAlign(n),new Z({image:o,text:i})}function Kt(r,e,t,n,o){return function(i,s){let l=o,a="",u=[];if(l){const h=i.getGeometry();if(h)if(h instanceof K)u=h.getGeometriesArrayRecursive().filter(function(S){const N=S.getType();return N==="Point"||N==="MultiPoint"}),l=u.length>0;else{const S=h.getType();l=S==="Point"||S==="MultiPoint"}}l&&(a=i.get("name"),l=l&&!!a,l&&/&[^&]+;/.test(a)&&(ie||(ie=document.createElement("textarea")),ie.innerHTML=a,a=ie.value));let g=t;if(r?g=r:e&&(g=qe(e,t,n)),l){const h=Bt(g[0],a);if(u.length>0){h.setGeometry(new K(u));const S=new Z({geometry:g[0].getGeometry(),image:null,fill:g[0].getFill(),stroke:g[0].getStroke(),text:null});return[h,S].concat(g.slice(1))}return h}return g}}function qe(r,e,t){return Array.isArray(r)?r:typeof r=="string"?qe(t[r],e,t):e}function ue(r){const e=C(r,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const n=t[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function We(r){let e=C(r,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let o;for(;o=n.exec(e);){const i=parseFloat(o[1]),s=parseFloat(o[2]),l=o[3]?parseFloat(o[3]):0;t.push(i,s,l),e=e.substr(o[0].length)}if(e==="")return t}function Je(r){const e=C(r,!1).trim();let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function je(r){const e=C(r,!1).trim().replace(/^(?!.*#)/,"#");let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Zt(r){const e=r.getAttribute("xunits"),t=r.getAttribute("yunits");let n;return e!=="insetPixels"?t!=="insetPixels"?n="bottom-left":n="top-left":t!=="insetPixels"?n="bottom-right":n="top-right",{x:parseFloat(r.getAttribute("x")),xunits:Ue[e],y:parseFloat(r.getAttribute("y")),yunits:Ue[t],origin:n}}function et(r){return p(r)}const Ht=f(d,{Pair:Sn});function tt(r,e){return y(void 0,Ht,r,e,this)}const Qt=f(d,{Icon:c(an),color:c(ue),heading:c(p),hotSpot:c(Zt),scale:c(et)});function Vt(r,e){const t=y({},Qt,r,e);if(!t)return;const n=e[e.length-1],o="Icon"in t?t.Icon:{},i=!("Icon"in t)||Object.keys(o).length>0;let s;const l=o.href;l?s=l:i&&(s=ae);let a,u,g,h="bottom-left";const S=t.hotSpot;S?(a=[S.x,S.y],u=S.xunits,g=S.yunits,h=S.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(s.includes("pushpin")?(a=Ne,u=te,g=ne):s.includes("arrow-reverse")?(a=[54,42],u=te,g=ne):s.includes("paddle")&&(a=[32,1],u=te,g=ne));let N;const _=o.x,U=o.y;_!==void 0&&U!==void 0&&(N=[_,U]);let A;const T=o.w,F=o.h;T!==void 0&&F!==void 0&&(A=[T,F]);let P;const x=t.heading;x!==void 0&&(P=_t(x));const W=t.scale,z=t.color;if(i){s==ae&&(A=oe);const w=new ze({anchor:a,anchorOrigin:h,anchorXUnits:u,anchorYUnits:g,crossOrigin:this.crossOrigin_,offset:N,offsetOrigin:"bottom-left",rotation:P,scale:W,size:A,src:this.iconUrlFunction_(s),color:z}),we=w.getScaleArray()[0],me=w.getSize();if(me===null){const J=w.getImageState();if(J===j.IDLE||J===j.LOADING){const De=function(){const Oe=w.getImageState();if(!(Oe===j.IDLE||Oe===j.LOADING)){const ge=w.getSize();if(ge&&ge.length==2){const ht=ce(ge);w.setScale(we*ht)}w.unlistenImageChange(De)}};w.listenImageChange(De),J===j.IDLE&&w.load()}}else if(me.length==2){const J=ce(me);w.setScale(we*J)}n.imageStyle=w}else n.imageStyle=Fe}const $t=f(d,{color:c(ue),scale:c(et)});function qt(r,e){const t=y({},$t,r,e);if(!t)return;const n=e[e.length-1],o=new Xe({fill:new Te({color:"color"in t?t.color:H}),scale:t.scale});n.textStyle=o}const Wt=f(d,{color:c(ue),width:c(p)});function Jt(r,e){const t=y({},Wt,r,e);if(!t)return;const n=e[e.length-1],o=new Ee({color:"color"in t?t.color:H,width:"width"in t?t.width:1});n.strokeStyle=o}const jt=f(d,{color:c(ue),fill:c(k),outline:c(k)});function en(r,e){const t=y({},jt,r,e);if(!t)return;const n=e[e.length-1],o=new Te({color:"color"in t?t.color:H});n.fillStyle=o;const i=t.fill;i!==void 0&&(n.fill=i);const s=t.outline;s!==void 0&&(n.outline=s)}const tn=f(d,{coordinates:xe(We)});function nt(r,e){return y(null,tn,r,e)}function nn(r,e){const n=e[e.length-1].coordinates,o=C(r,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(o);if(s){const l=parseFloat(s[1]),a=parseFloat(s[2]),u=parseFloat(s[3]);n.push([l,a,u])}else n.push([])}const on=f(G,{Track:Y(ot)});function rn(r,e){const t=y([],on,r,e);if(t)return new Ke(t)}const sn=f(d,{when:Dn},f(G,{coord:nn}));function ot(r,e){const t=y({coordinates:[],whens:[]},sn,r,e);if(!t)return;const n=[],o=t.coordinates,i=t.whens;for(let s=0,l=Math.min(o.length,i.length);s<l;++s)o[s].length==3&&n.push(o[s][0],o[s][1],o[s][2],i[s]);return new Ze(n,"XYZM")}const ln=f(d,{href:c(Je)},f(G,{x:c(p),y:c(p),w:c(p),h:c(p)}));function an(r,e){const t=y({},ln,r,e);return t||null}const cn=f(d,{coordinates:xe(We)});function Pe(r,e){return y(null,cn,r,e)}const de=f(d,{extrude:c(k),tessellate:c(k),altitudeMode:c(L)});function rt(r,e){const t=y({},de,r,e),n=Pe(r,e);if(n){const o=new Ze(n,"XYZ");return o.setProperties(t,!0),o}}function it(r,e){const t=y({},de,r,e),n=Pe(r,e);if(n){const o=new Be(n,"XYZ",[n.length]);return o.setProperties(t,!0),o}}const un=f(d,{LineString:Y(rt),LinearRing:Y(it),MultiGeometry:Y(st),Point:Y(lt),Polygon:Y(at)});function st(r,e){const t=y([],un,r,e);if(!t)return null;if(t.length===0)return new K(t);let n,o=!0;const i=t[0].getType();let s;for(let l=1,a=t.length;l<a;++l)if(s=t[l],s.getType()!=i){o=!1;break}if(o){let l,a;if(i=="Point"){const u=t[0];l=u.getLayout(),a=u.getFlatCoordinates();for(let g=1,h=t.length;g<h;++g)s=t[g],R(a,s.getFlatCoordinates());n=new Lt(a,l),Se(n,t)}else if(i=="LineString")n=new Ke(t),Se(n,t);else if(i=="Polygon")n=new At(t),Se(n,t);else if(i=="GeometryCollection")n=new K(t);else throw new Error("Unknown geometry type found")}else n=new K(t);return n}function lt(r,e){const t=y({},de,r,e),n=Pe(r,e);if(n){const o=new Nt(n,"XYZ");return o.setProperties(t,!0),o}}const dn=f(d,{innerBoundaryIs:Fn,outerBoundaryIs:In});function at(r,e){const t=y({},de,r,e),n=y([null],dn,r,e);if(n&&n[0]){const o=n[0],i=[o.length];for(let l=1,a=n.length;l<a;++l)R(o,n[l]),i.push(o.length);const s=new Be(o,"XYZ",i);return s.setProperties(t,!0),s}}const fn=f(d,{IconStyle:Vt,LabelStyle:qt,LineStyle:Jt,PolyStyle:en});function Ie(r,e){const t=y({},fn,r,e,this);if(!t)return null;let n="fillStyle"in t?t.fillStyle:se;const o=t.fill;o!==void 0&&!o&&(n=null);let i;"imageStyle"in t?t.imageStyle!=Fe&&(i=t.imageStyle):i=Re;const s="textStyle"in t?t.textStyle:B,l="strokeStyle"in t?t.strokeStyle:_e,a=t.outline;return a!==void 0&&!a?[new Z({geometry:function(u){const g=u.getGeometry(),h=g.getType();if(h==="GeometryCollection"){const S=g;return new K(S.getGeometriesArrayRecursive().filter(function(N){const _=N.getType();return _!=="Polygon"&&_!=="MultiPolygon"}))}if(h!=="Polygon"&&h!=="MultiPolygon")return g},fill:n,image:i,stroke:l,text:s,zIndex:void 0}),new Z({geometry:function(u){const g=u.getGeometry(),h=g.getType();if(h==="GeometryCollection"){const S=g;return new K(S.getGeometriesArrayRecursive().filter(function(N){const _=N.getType();return _==="Polygon"||_==="MultiPolygon"}))}if(h==="Polygon"||h==="MultiPolygon")return g},fill:n,stroke:null,zIndex:void 0})]:[new Z({fill:n,image:i,stroke:l,text:s,zIndex:void 0})]}function Se(r,e){const t=e.length,n=new Array(e.length),o=new Array(e.length),i=new Array(e.length);let s,l,a;s=!1,l=!1,a=!1;for(let u=0;u<t;++u){const g=e[u];n[u]=g.get("extrude"),o[u]=g.get("tessellate"),i[u]=g.get("altitudeMode"),s=s||n[u]!==void 0,l=l||o[u]!==void 0,a=a||i[u]}s&&r.set("extrude",n),l&&r.set("tessellate",o),a&&r.set("altitudeMode",i)}const mn=f(d,{displayName:c(L),value:c(L)});function gn(r,e){const t=r.getAttribute("name");$(mn,r,e);const n=e[e.length-1];t&&n.displayName?n[t]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:t!==null?n[t]=n.value:n.displayName!==null&&(n[n.displayName]=n.value),delete n.value}const yn=f(d,{Data:gn,SchemaData:Nn});function ct(r,e){$(yn,r,e)}function ut(r,e){$($e,r,e)}const hn=f(d,{Style:c(Ie),key:c(L),styleUrl:c(je)});function Sn(r,e){const t=y({},hn,r,e,this);if(!t)return;const n=t.key;if(n&&n=="normal"){const o=t.styleUrl;o&&(e[e.length-1]=o);const i=t.Style;i&&(e[e.length-1]=i)}}function pn(r,e){const t=tt.call(this,r,e);if(!t)return;const n=e[e.length-1];if(Array.isArray(t))n.Style=t;else if(typeof t=="string")n.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const En=f(d,{SimpleData:Rn});function Nn(r,e){$(En,r,e)}function Rn(r,e){const t=r.getAttribute("name");if(t!==null){const n=L(r),o=e[e.length-1];o[t]=n}}const _n=f(d,{altitudeMode:c(L),minAltitude:c(p),maxAltitude:c(p),north:c(p),south:c(p),east:c(p),west:c(p)});function An(r,e){const t=y({},_n,r,e);if(!t)return;const n=e[e.length-1],o=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];n.extent=o,n.altitudeMode=t.altitudeMode,n.minAltitude=parseFloat(t.minAltitude),n.maxAltitude=parseFloat(t.maxAltitude)}const Ln=f(d,{minLodPixels:c(p),maxLodPixels:c(p),minFadeExtent:c(p),maxFadeExtent:c(p)});function Tn(r,e){const t=y({},Ln,r,e);if(!t)return;const n=e[e.length-1];n.minLodPixels=parseFloat(t.minLodPixels),n.maxLodPixels=parseFloat(t.maxLodPixels),n.minFadeExtent=parseFloat(t.minFadeExtent),n.maxFadeExtent=parseFloat(t.maxFadeExtent)}const xn=f(d,{LinearRing:Y(nt)});function Fn(r,e){const t=y([],xn,r,e);t.length>0&&e[e.length-1].push(...t)}const Pn=f(d,{LinearRing:xe(nt)});function In(r,e){const t=y(void 0,Pn,r,e);if(t){const n=e[e.length-1];n[0]=t}}function wn(r,e){$(Gt,r,e)}function Dn(r,e){const n=e[e.length-1].whens,o=C(r,!1),i=Date.parse(o);n.push(isNaN(i)?0:i)}function fe(r,e){const t=Rt(e),o=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let i=0;i<4;++i){const s=Math.floor(o[i]).toString(16);o[i]=s.length==1?"0"+s:s}D(r,o.join(""))}function On(r,e,t){const n=t[t.length-1],o=n.layout,i=n.stride;let s;if(o=="XY"||o=="XYM")s=2;else if(o=="XYZ"||o=="XYZM")s=3;else throw new Error("Invalid geometry layout");const l=e.length;let a="";if(l>0){a+=e[0];for(let u=1;u<s;++u)a+=","+e[u];for(let u=i;u<l;u+=i){a+=" "+e[u];for(let g=1;g<s;++g)a+=","+e[u+g]}}D(r,a)}const le=f(d,{Data:m(Cn),value:m(Un),displayName:m(Mn)});function Cn(r,e,t){r.setAttribute("name",e.name);const n={node:r},o=e.value;typeof o=="object"?(o!==null&&o.displayName&&E(n,le,I,[o.displayName],t,["displayName"]),o!==null&&o.value&&E(n,le,I,[o.value],t,["value"])):E(n,le,I,[o],t,["value"])}function Mn(r,e){Ot(r,e)}function Un(r,e){D(r,e)}const Gn=f(d,{Placemark:m(mt)}),Yn=function(r,e,t){const n=e[e.length-1].node;return re(n.namespaceURI,"Placemark")};function vn(r,e,t){E({node:r},Gn,Yn,e,t,void 0,this)}const bn=M("Data");function kn(r,e,t){const n={node:r},o=e.names,i=e.values,s=o.length;for(let l=0;l<s;l++)E(n,le,bn,[{name:o[l],value:i[l]}],t)}const Ye=f(d,["href"],f(G,["x","y","w","h"])),ve=f(d,{href:m(D)},f(G,{x:m(X),y:m(X),w:m(X),h:m(X)})),zn=function(r,e,t){return re(G[0],"gx:"+t)};function Xn(r,e,t){const n={node:r},o=t[t.length-1].node;let i=Ye[o.namespaceURI],s=O(e,i);E(n,ve,I,s,t,i),i=Ye[G[0]],s=O(e,i),E(n,ve,zn,s,t,i)}const Bn=f(d,["scale","heading","Icon","color","hotSpot"]),Kn=f(d,{Icon:m(Xn),color:m(fe),heading:m(X),hotSpot:m(po),scale:m(yt)});function Zn(r,e,t){const n={node:r},o={},i=e.getSrc(),s=e.getSize(),l=e.getImageSize(),a={href:i};if(s){a.w=s[0],a.h=s[1];const A=e.getAnchor(),T=e.getOrigin();if(T&&l&&T[0]!==0&&T[1]!==s[1]&&(a.x=T[0],a.y=l[1]-(T[1]+s[1])),A&&(A[0]!==s[0]/2||A[1]!==s[1]/2)){const F={x:A[0],xunits:"pixels",y:s[1]-A[1],yunits:"pixels"};o.hotSpot=F}}o.Icon=a;let u=e.getScaleArray()[0],g=s;if(g===null&&(g=oe),g.length==2){const A=ce(g);u=u/A}u!==1&&(o.scale=u);const h=e.getRotation();h!==0&&(o.heading=h);const S=e.getColor();S&&(o.color=S);const N=t[t.length-1].node,_=Bn[N.namespaceURI],U=O(o,_);E(n,Kn,I,U,t,_)}const Hn=f(d,["color","scale"]),Qn=f(d,{color:m(fe),scale:m(yt)});function Vn(r,e,t){const n={node:r},o={},i=e.getFill();i&&(o.color=i.getColor());const s=e.getScale();s&&s!==1&&(o.scale=s);const l=t[t.length-1].node,a=Hn[l.namespaceURI],u=O(o,a);E(n,Qn,I,u,t,a)}const $n=f(d,["color","width"]),qn=f(d,{color:m(fe),width:m(X)});function Wn(r,e,t){const n={node:r},o={color:e.getColor(),width:Number(e.getWidth())||1},i=t[t.length-1].node,s=$n[i.namespaceURI],l=O(o,s);E(n,qn,I,l,t,s)}const Jn={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},dt=function(r,e,t){if(r){const n=e[e.length-1].node;return re(n.namespaceURI,Jn[r.getType()])}},jn=M("Point"),eo=M("LineString"),to=M("LinearRing"),no=M("Polygon"),oo=f(d,{LineString:m(Q),Point:m(Q),Polygon:m(gt),GeometryCollection:m(ft)});function ft(r,e,t){const n={node:r},o=e.getType();let i=[],s;if(o==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(l){const a=l.getType();if(a==="MultiPoint")i=i.concat(l.getPoints());else if(a==="MultiLineString")i=i.concat(l.getLineStrings());else if(a==="MultiPolygon")i=i.concat(l.getPolygons());else if(a==="Point"||a==="LineString"||a==="Polygon")i.push(l);else throw new Error("Unknown geometry type")}),s=dt;else if(o==="MultiPoint")i=e.getPoints(),s=jn;else if(o==="MultiLineString")i=e.getLineStrings(),s=eo;else if(o==="MultiPolygon")i=e.getPolygons(),s=no;else throw new Error("Unknown geometry type");E(n,oo,s,i,t)}const ro=f(d,{LinearRing:m(Q)});function be(r,e,t){E({node:r},ro,to,[e],t)}const pe=f(d,{ExtendedData:m(kn),MultiGeometry:m(ft),LineString:m(Q),LinearRing:m(Q),Point:m(Q),Polygon:m(gt),Style:m(So),address:m(D),description:m(D),name:m(D),open:m(V),phoneNumber:m(D),styleUrl:m(D),visibility:m(V)}),io=f(d,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),so=M("ExtendedData");function mt(r,e,t){const n={node:r};e.getId()&&r.setAttribute("id",e.getId());const o=e.getProperties(),i={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};i[e.getGeometryName()]=1;const s=Object.keys(o||{}).sort().filter(function(N){return!i[N]}),l=e.getStyleFunction();if(l){const N=l(e,0);if(N){const _=Array.isArray(N)?N:[N];let U=_;if(e.getGeometry()&&(U=_.filter(function(A){const T=A.getGeometryFunction()(e);if(T){const F=T.getType();return F==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(P){const x=P.getType();return x==="Point"||x==="MultiPoint"}).length:F==="Point"||F==="MultiPoint"}})),this.writeStyles_){let A=_,T=_;e.getGeometry()&&(A=_.filter(function(F){const P=F.getGeometryFunction()(e);if(P){const x=P.getType();return x==="GeometryCollection"?P.getGeometriesArrayRecursive().filter(function(W){const z=W.getType();return z==="LineString"||z==="MultiLineString"}).length:x==="LineString"||x==="MultiLineString"}}),T=_.filter(function(F){const P=F.getGeometryFunction()(e);if(P){const x=P.getType();return x==="GeometryCollection"?P.getGeometriesArrayRecursive().filter(function(W){const z=W.getType();return z==="Polygon"||z==="MultiPolygon"}).length:x==="Polygon"||x==="MultiPolygon"}})),o.Style={pointStyles:U,lineStyles:A,polyStyles:T}}if(U.length&&o.name===void 0){const A=U[0].getText();A&&(o.name=A.getText())}}}const a=t[t.length-1].node,u=io[a.namespaceURI],g=O(o,u);if(E(n,pe,I,g,t,u),s.length>0){const N=O(o,s);E(n,pe,so,[{names:s,values:N}],t)}const h=t[0];let S=e.getGeometry();S&&(S=He(S,!0,h)),E(n,pe,dt,[S],t)}const lo=f(d,["extrude","tessellate","altitudeMode","coordinates"]),ao=f(d,{extrude:m(V),tessellate:m(V),altitudeMode:m(D),coordinates:m(On)});function Q(r,e,t){const n=e.getFlatCoordinates(),o={node:r};o.layout=e.getLayout(),o.stride=e.getStride();const i=e.getProperties();i.coordinates=n;const s=t[t.length-1].node,l=lo[s.namespaceURI],a=O(i,l);E(o,ao,I,a,t,l)}const co=f(d,["color","fill","outline"]),ke=f(d,{outerBoundaryIs:m(be),innerBoundaryIs:m(be)}),uo=M("innerBoundaryIs"),fo=M("outerBoundaryIs");function gt(r,e,t){const n=e.getLinearRings(),o=n.shift(),i={node:r};E(i,ke,uo,n,t),E(i,ke,fo,[o],t)}const mo=f(d,{color:m(fe),fill:m(V),outline:m(V)});function go(r,e,t){const n={node:r},o=e.getFill(),i=e.getStroke(),s={color:o?o.getColor():void 0,fill:o?void 0:!1,outline:i?void 0:!1},l=t[t.length-1].node,a=co[l.namespaceURI],u=O(s,a);E(n,mo,I,u,t,a)}function yt(r,e){X(r,Math.round(e*1e6)/1e6)}const yo=f(d,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),ho=f(d,{IconStyle:m(Zn),LabelStyle:m(Vn),LineStyle:m(Wn),PolyStyle:m(go)});function So(r,e,t){const n={node:r},o={};if(e.pointStyles.length){const a=e.pointStyles[0].getText();a&&(o.LabelStyle=a);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(o.IconStyle=u)}if(e.lineStyles.length){const a=e.lineStyles[0].getStroke();a&&(o.LineStyle=a)}if(e.polyStyles.length){const a=e.polyStyles[0].getStroke();a&&!o.LineStyle&&(o.LineStyle=a),o.PolyStyle=e.polyStyles[0]}const i=t[t.length-1].node,s=yo[i.namespaceURI],l=O(o,s);E(n,ho,I,l,t,s)}function po(r,e){r.setAttribute("x",String(e.x)),r.setAttribute("y",String(e.y)),r.setAttribute("xunits",e.xunits),r.setAttribute("yunits",e.yunits)}const Do=Xt;export{Do as K,I as O,Pt as X,y as a,Ce as b,re as c,E as d,Y as e,c as f,Fo as g,Po as h,v as i,m as j,p as k,wo as l,f as m,xo as n,X as o,b as p,Io as q,L as r,$ as s,O as t,M as u,D as w};
