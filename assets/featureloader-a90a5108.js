import{bt as I,L as N,K as T,G as E,as as w,bu as A,bv as S,bw as M,Y as L,bx as O,s as K,by as k,aN as q,bn as v,b1 as z,g as B,a0 as C,a4 as D,bz as H,bA as R,aI as X,bB as U,bf as $,b7 as J,bC as V}from"./Layer-3b715193.js";class G extends I{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const r=t;this.setGeometry(r)}else{const r=t;this.setProperties(r)}}clone(){const t=new G(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const r=this.getGeometry();r&&t.setGeometry(r.clone());const e=this.getStyle();return e&&t.setStyle(e),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(N(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=T(t,E.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?W(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function W(i){if(typeof i=="function")return i;let t;return Array.isArray(i)?t=i:(w(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[i]),function(){return t}}const tt=G;function F(i,t,r,e,s,h,o){let n,a;const u=(r-t)/e;if(u===1)n=t;else if(u===2)n=t,a=s;else if(u!==0){let l=i[t],g=i[t+1],y=0;const p=[0];for(let f=t+e;f<r;f+=e){const m=i[f],d=i[f+1];y+=Math.sqrt((m-l)*(m-l)+(d-g)*(d-g)),p.push(y),l=m,g=d}const x=s*y,_=A(p,x);_<0?(a=(x-p[-_-2])/(p[-_-1]-p[-_-2]),n=t+(-_-2)*e):n=t+_*e}o=o>1?o:2,h=h||new Array(o);for(let l=0;l<o;++l)h[l]=n===void 0?NaN:a===void 0?i[n+l]:S(i[n+l],i[n+e+l],a);return h}function P(i,t,r,e,s,h){if(r==t)return null;let o;if(s<i[t+e-1])return h?(o=i.slice(t,t+e),o[e-1]=s,o):null;if(i[r-1]<s)return h?(o=i.slice(r-e,r),o[e-1]=s,o):null;if(s==i[t+e-1])return i.slice(t,t+e);let n=t/e,a=r/e;for(;n<a;){const y=n+a>>1;s<i[(y+1)*e-1]?a=y:n=y+1}const u=i[n*e-1];if(s==u)return i.slice((n-1)*e,(n-1)*e+e);const l=i[(n+1)*e-1],g=(s-u)/(l-u);o=[];for(let y=0;y<e-1;++y)o.push(S(i[(n-1)*e+y],i[n*e+y],g));return o.push(s),o}function et(i,t,r,e,s,h,o){if(o)return P(i,t,r[r.length-1],e,s,h);let n;if(s<i[e-1])return h?(n=i.slice(0,e),n[e-1]=s,n):null;if(i[i.length-1]<s)return h?(n=i.slice(i.length-e),n[e-1]=s,n):null;for(let a=0,u=r.length;a<u;++a){const l=r[a];if(t!=l){if(s<i[t+e-1])return null;if(s<=i[l-1])return P(i,t,l,e,s,!1);t=l}}return null}function Y(i,t,r,e){const s=[];let h=L();for(let o=0,n=r.length;o<n;++o){const a=r[o];h=M(i,t,a[0],e),s.push((h[0]+h[2])/2,(h[1]+h[3])/2),t=a[a.length-1]}return s}const b=X();class c{constructor(t,r,e,s,h,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=r,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=e||null,this.properties_=h,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?O(this.flatCoordinates_):M(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=K(this.getExtent());this.flatInteriorPoints_=k(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=q(this.flatCoordinates_,this.ends_),r=Y(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=v(this.flatCoordinates_,0,t,2,r)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=F(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let r=0;const e=this.ends_;for(let s=0,h=e.length;s<h;++s){const o=e[s],n=F(t,r,o,2,.5);z(this.flatMidpoints_,n),r=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,r){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=B(t);const r=t.getExtent(),e=t.getWorldExtent();if(r&&e){const s=C(e)/C(r);D(b,e[0],e[3],s,-s,0,0,0),H(this.flatCoordinates_,0,this.flatCoordinates_.length,2,b,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new c(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=R((t,r)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),r&&this.simplifiedGeometry_.applyTransform(r);const e=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":e.length=J(e,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,e,0),s=[e.length];break;case"MultiLineString":s=[],e.length=$(e,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,e,0,s);break;case"Polygon":s=[],e.length=U(e,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),e,0,s);break}return s&&(this.simplifiedGeometry_=new c(this.type_,e,s,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}c.prototype.getFlatCoordinates=c.prototype.getOrientedFlatCoordinates;const it=c;let Z=!1;function Q(i,t,r,e,s,h,o){const n=new XMLHttpRequest;n.open("GET",typeof i=="function"?i(r,e,s):i,!0),t.getType()=="arraybuffer"&&(n.responseType="arraybuffer"),n.withCredentials=Z,n.onload=function(a){if(!n.status||n.status>=200&&n.status<300){const u=t.getType();let l;u=="json"?l=JSON.parse(n.responseText):u=="text"?l=n.responseText:u=="xml"?(l=n.responseXML,l||(l=new DOMParser().parseFromString(n.responseText,"application/xml"))):u=="arraybuffer"&&(l=n.response),l?h(t.readFeatures(l,{extent:r,featureProjection:s}),t.readProjection(l)):o()}else o()},n.onerror=o,n.send()}function st(i,t){return function(r,e,s,h,o){const n=this;Q(i,t,r,e,s,function(a,u){n.addFeatures(a),h!==void 0&&h(a)},o||V)}}export{tt as F,it as R,P as a,et as b,Y as c,F as i,Q as l,st as x};
