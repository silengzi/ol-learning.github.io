import{a0 as q,ak as _,bA as K,a1 as E,b5 as C,aQ as j,be as R,bg as I,bj as M,bf as P,bk as A,bl as W,aA as tt,bB as et,aO as it,aX as F,ac as st,j as D,bC as nt,aP as at,bq as Z,bi as Y,bh as X,bs as lt,br as rt,m as H}from"./Layer-763025a3.js";class z{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=q(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new z({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return _()}getImage(t){return _()}getHitDetectionImage(){return _()}getPixelRatio(t){return 1}getImageState(){return _()}getImageSize(){return _()}getOrigin(){return _()}getSize(){return _()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=q(t)}listenImageChange(t){_()}load(){_()}unlistenImageChange(t){_()}}const ot=z;function w(r){return Array.isArray(r)?K(r):r}class G extends ot{constructor(t){const e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new G({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,n=E(i.size*t,i.size*t);this.draw_(i,n,t),e=n.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return C.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let n=this.radius_,l=this.radius2_===void 0?n:this.radius2_;if(n<l){const p=n;n=l,l=p}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,o=l*Math.sin(a),h=Math.sqrt(l*l-o*o),c=n-h,f=Math.sqrt(o*o+c*c),u=f/o;if(t==="miter"&&u<=i)return u*e;const g=e/2/u,d=e/2*(c/f),y=Math.sqrt((n+g)*(n+g)+d*d)-n;if(this.radius2_===void 0||t==="bevel")return y*2;const m=n*Math.sin(a),k=Math.sqrt(n*n-m*m),T=l-k,B=Math.sqrt(m*m+T*T)/m;if(B<=i){const p=B*e/2-l-n;return 2*Math.max(y,p)}return y*2}createRenderOptions(){let t=I,e=M,i=0,n=null,l=0,s,a=0;this.stroke_&&(s=this.stroke_.getColor(),s===null&&(s=P),s=w(s),a=this.stroke_.getWidth(),a===void 0&&(a=A),n=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=M),t=this.stroke_.getLineCap(),t===void 0&&(t=I),i=this.stroke_.getMiterLimit(),i===void 0&&(i=W));const o=this.calculateLineJoinSize_(e,a,i),h=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*h+o);return{strokeStyle:s,strokeWidth:a,size:c,lineCap:t,lineDash:n,lineDashOffset:l,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let n=this.fill_.getColor();n===null&&(n=R),e.fillStyle=w(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=j(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){const n=E(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const n=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const l=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let a=0;a<e;a++){const o=l+a*s,h=a%2===0?i:n;t.lineTo(h*Math.cos(o),h*Math.sin(o))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=R,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const ht=G;class J extends ht{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new J({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const N=J;class V{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new V({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const v=V;class b{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new b({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const L=b;class S{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=$,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new S({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=$,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Rt(r){let t;if(typeof r=="function")t=r;else{let e;Array.isArray(r)?e=r:(tt(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[r]),t=function(){return e}}return t}let O=null;function It(r,t){if(!O){const e=new v({color:"rgba(255,255,255,0.4)"}),i=new L({color:"#3399CC",width:1.25});O=[new S({image:new N({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return O}function Mt(){const r={},t=[255,255,255,1],e=[0,153,255,1],i=3;return r.Polygon=[new S({fill:new v({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new S({stroke:new L({color:t,width:i+2})}),new S({stroke:new L({color:e,width:i})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new S({image:new N({radius:i*2,fill:new v({color:e}),stroke:new L({color:t,width:i/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function $(r){return r.getGeometry()}const pt=S;class ct{drawCustom(t,e,i,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const ft=ct;class gt extends ft{constructor(t,e,i,n,l,s,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.transformRotation_=n?et(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=it()}drawImages_(t,e,i,n){if(!this.image_)return;const l=F(t,e,i,n,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,o=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=o*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,f=l.length;c<f;c+=2){const u=l[c]-this.imageAnchorX_,g=l[c+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const d=u+this.imageAnchorX_,x=g+this.imageAnchorY_;st(a,d,x,1,1,h,-d,-x),s.save(),s.transform.apply(s,a),s.translate(d,x),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,g,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=o)}drawText_(t,e,i,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=F(t,e,i,n,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){const o=l[e]+this.textOffsetX_,h=l[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(o-this.textOffsetX_,h-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,o,h),this.textFillState_&&s.fillText(this.text_,o,h))}}moveToLineTo_(t,e,i,n,l){const s=this.context_,a=F(t,e,i,n,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let o=a.length;l&&(o-=2);for(let h=2;h<o;h+=2)s.lineTo(a[h],a[h+1]);return l&&s.closePath(),i}drawRings_(t,e,i,n){for(let l=0,s=i.length;l<s;++l)e=this.moveToLineTo_(t,e,i[l],n,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!D(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=nt(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],l=Math.sqrt(i*i+n*n),s=this.context_;s.beginPath(),s.arc(e[0],e[1],l,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!D(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(D(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=t.getFlatCoordinates();let l=0;const s=t.getEnds(),a=t.getStride();i.beginPath();for(let o=0,h=s.length;o<h;++o)l=this.moveToLineTo_(n,l,s[o],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!D(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!D(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const l=t.getEndss(),s=t.getStride();e.beginPath();for(let a=0,o=l.length;a<o;++a){const h=l[a];n=this.drawRings_(i,n,h,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),at(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:Z;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:w(i||R)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),n=e.getLineCap(),l=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),o=e.getWidth(),h=e.getMiterLimit(),c=l||X;this.strokeState_={lineCap:n!==void 0?n:I,lineDash:this.pixelRatio_===1?c:c.map(f=>f*this.pixelRatio_),lineDashOffset:(s||Y)*this.pixelRatio_,lineJoin:a!==void 0?a:M,lineWidth:(o!==void 0?o:A)*this.pixelRatio_,miterLimit:h!==void 0?h:W,strokeStyle:w(i||P)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),l=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const g=e.getColor();this.textFillState_={fillStyle:w(g||R)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const g=i.getColor(),d=i.getLineCap(),x=i.getLineDash(),y=i.getLineDashOffset(),m=i.getLineJoin(),k=i.getWidth(),T=i.getMiterLimit();this.textStrokeState_={lineCap:d!==void 0?d:I,lineDash:x||X,lineDashOffset:y||Y,lineJoin:m!==void 0?m:M,lineWidth:k!==void 0?k:A,miterLimit:T!==void 0?T:W,strokeStyle:w(g||P)}}const n=t.getFont(),l=t.getOffsetX(),s=t.getOffsetY(),a=t.getRotateWithView(),o=t.getRotation(),h=t.getScaleArray(),c=t.getText(),f=t.getTextAlign(),u=t.getTextBaseline();this.textState_={font:n!==void 0?n:lt,textAlign:f!==void 0?f:Z,textBaseline:u!==void 0?u:rt},this.text_=c!==void 0?Array.isArray(c)?c.reduce((g,d,x)=>g+=x%2?" ":d,""):c:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=o!==void 0?o:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const Ft=gt,dt=.5,Q={Point:Ct,LineString:St,Polygon:Dt,MultiPoint:Tt,MultiLineString:yt,MultiPolygon:wt,GeometryCollection:mt,Circle:ut};function Ot(r,t){return parseInt(H(r),10)-parseInt(H(t),10)}function Pt(r,t){const e=_t(r,t);return e*e}function _t(r,t){return dt*r/t}function ut(r,t,e,i,n){const l=e.getFill(),s=e.getStroke();if(l||s){const o=r.getBuilder(e.getZIndex(),"Circle");o.setFillStrokeStyle(l,s),o.drawCircle(t,i)}const a=e.getText();if(a&&a.getText()){const o=(n||r).getBuilder(e.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i)}}function At(r,t,e,i,n,l,s){let a=!1;const o=e.getImage();if(o){const h=o.getImageState();h==C.LOADED||h==C.ERROR?o.unlistenImageChange(n):(h==C.IDLE&&o.load(),o.listenImageChange(n),a=!0)}return xt(r,t,e,i,l,s),a}function xt(r,t,e,i,n,l){const s=e.getGeometryFunction()(t);if(!s)return;const a=s.simplifyTransformed(i,n);if(e.getRenderer())U(r,a,e,t);else{const h=Q[a.getType()];h(r,a,e,t,l)}}function U(r,t,e,i){if(t.getType()=="GeometryCollection"){const l=t.getGeometries();for(let s=0,a=l.length;s<a;++s)U(r,l[s],e,i);return}r.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function mt(r,t,e,i,n){const l=t.getGeometriesArray();let s,a;for(s=0,a=l.length;s<a;++s){const o=Q[l[s].getType()];o(r,l[s],e,i,n)}}function St(r,t,e,i,n){const l=e.getStroke();if(l){const a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,l),a.drawLineString(t,i)}const s=e.getText();if(s&&s.getText()){const a=(n||r).getBuilder(e.getZIndex(),"Text");a.setTextStyle(s),a.drawText(t,i)}}function yt(r,t,e,i,n){const l=e.getStroke();if(l){const a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,l),a.drawMultiLineString(t,i)}const s=e.getText();if(s&&s.getText()){const a=(n||r).getBuilder(e.getZIndex(),"Text");a.setTextStyle(s),a.drawText(t,i)}}function wt(r,t,e,i,n){const l=e.getFill(),s=e.getStroke();if(s||l){const o=r.getBuilder(e.getZIndex(),"Polygon");o.setFillStrokeStyle(l,s),o.drawMultiPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const o=(n||r).getBuilder(e.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i)}}function Ct(r,t,e,i,n){const l=e.getImage(),s=e.getText();let a;if(l){if(l.getImageState()!=C.LOADED)return;let o=r;if(n){const c=l.getDeclutterMode();if(c!=="none")if(o=n,c==="obstacle"){const f=r.getBuilder(e.getZIndex(),"Image");f.setImageStyle(l,a),f.drawPoint(t,i)}else s&&s.getText()&&(a={})}const h=o.getBuilder(e.getZIndex(),"Image");h.setImageStyle(l,a),h.drawPoint(t,i)}if(s&&s.getText()){let o=r;n&&(o=n);const h=o.getBuilder(e.getZIndex(),"Text");h.setTextStyle(s,a),h.drawText(t,i)}}function Tt(r,t,e,i,n){const l=e.getImage(),s=e.getText();let a;if(l){if(l.getImageState()!=C.LOADED)return;let o=r;if(n){const c=l.getDeclutterMode();if(c!=="none")if(o=n,c==="obstacle"){const f=r.getBuilder(e.getZIndex(),"Image");f.setImageStyle(l,a),f.drawMultiPoint(t,i)}else s&&s.getText()&&(a={})}const h=o.getBuilder(e.getZIndex(),"Image");h.setImageStyle(l,a),h.drawMultiPoint(t,i)}if(s&&s.getText()){let o=r;n&&(o=n);const h=o.getBuilder(e.getZIndex(),"Text");h.setTextStyle(s,a),h.drawText(t,i)}}function Dt(r,t,e,i,n){const l=e.getFill(),s=e.getStroke();if(l||s){const o=r.getBuilder(e.getZIndex(),"Polygon");o.setFillStrokeStyle(l,s),o.drawPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const o=(n||r).getBuilder(e.getZIndex(),"Text");o.setTextStyle(a),o.drawText(t,i)}}export{N as C,v as F,ot as I,ht as R,L as S,ft as V,pt as a,It as b,Mt as c,w as d,Ft as e,_t as f,Pt as g,Ot as h,At as r,Rt as t};
